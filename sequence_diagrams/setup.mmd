sequenceDiagram
    actor User
    participant WE as WorkflowEngine
    participant SC as SuperCli
    participant GH as GitHubCli
    participant CSP as CSPManager
    participant EVM as EnvVarManager
    
    box Remote Services
    participant GHAPI as GitHub API
    participant CSPAPI as CSP API<br>(GCP/Vercel)
    end
    
    WE->>SC: initialize()
    SC-->>WE: CLI tools initialized
    
    WE->>GH: confirmAccountSetup()
    activate GH
    GH->>GHAPI: fetchLoggedInUser()
    GHAPI-->>GH: user details
    GH->>GHAPI: fetchOrganizationNames()
    GHAPI-->>GH: organization list
    GH-->>WE: GitHub account confirmed
    deactivate GH
    
    WE->>CSP: selectCSP()
    activate CSP
    CSP->>User: prompt for CSP selection
    User-->>CSP: select CSP (GCP/Vercel)
    CSP->>CSPAPI: confirmAccountSetup()
    CSPAPI-->>CSP: account details
    CSP-->>WE: CSP selected and confirmed
    deactivate CSP
    
    WE->>GH: setInputs()
    activate GH
    GH->>User: prompt for project name
    User-->>GH: enter project name
    GH->>User: prompt for organization selection
    User-->>GH: select organization
    GH-->>WE: GitHub inputs collected
    deactivate GH
    
    WE->>CSP: collectInputs()
    activate CSP
    CSP->>User: prompt for CSP-specific inputs
    User-->>CSP: enter CSP inputs
    CSP-->>WE: CSP inputs collected
    deactivate CSP
    
    WE->>EVM: collectEnvVars()
    activate EVM
    EVM->>User: prompt for multiple environments
    User-->>EVM: select environment option
    EVM->>User: prompt for common environment variables
    User-->>EVM: enter common variables
    
    alt Multiple Environments
        EVM->>User: prompt for staging environment variables
        User-->>EVM: enter staging variables
        EVM->>User: prompt for production environment variables
        User-->>EVM: enter production variables
    end
    
    EVM-->>WE: Environment variables collected
    deactivate EVM